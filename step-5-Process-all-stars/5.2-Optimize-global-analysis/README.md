# Step-5.2: Optimize all stars analysis!

You learn how to use some of the WarpScript framework and how to write your first script to detect exoplanet! Let's now try to apply this analysis on all the lightcurve of each stars we have at our disposal.

## Practice

In the first script you write only one function: [TIMESPLIT](http://www.warp10.io/reference/functions/function_TIMESPLIT/) request single GTS. Encapsuled this instruction inside a LOOP. When using LMAP, you can replace a time-series by a list thereof. Then to flat the list the [FLATTEN](http://www.warp10.io/reference/functions/function_FLATTEN/) warpscript function can be used.

Then all the WarpScript framework functions can be applied on Time-series list. Just be careful on the equivalence class!

# Lesson summary

[Global analysys optimisation](https://quantum.metrics.ovh.net/#/warpscript/Ly8gU3RvcmluZyB0aGUgdG9rZW4gaW50byBhIHZhcmlhYmxlCkBIRUxMT0VYT1dPUkxEL0dFVFJFQURUT0tFTiAndG9rZW4nIFNUT1JFIAoKLy8gRkVUQ0gKWyAKICAgICR0b2tlbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGxpY2F0aW9uIGF1dGhlbnRpY2F0aW9uCiAgICAnc2FwLmZsdXgnICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3RvciBmb3IgY2xhc3NuYW1lCiAgICB7fSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3RvciBmb3IgbGFiZWxzCiAgICAnMjAwOS0wNS0wMlQwMDo1NjoxMC4wMDAwMDBaJyAgICAgICAvLyBTdGFydCBkYXRlCiAgICAnMjAxMy0wNS0xMVQxMjowMjowNi4wMDAwMDBaJyAgICAgICAvLyBFbmQgZGF0ZQpdIApGRVRDSAoKLy8gQXBwbHkgVGltZWNsaXAgb24gZWFjaCBzdGFycyBzZXJpZXMKPCUKICAgIC8vIERlbGV0ZSBpbmRleAogICAgRFJPUAogICAgCiAgICAvLwogICAgLy8gVElNRVNQTElUIGJsb2NrOgogICAgLy8KCiAgICAvLyBRdWllc2NlIHBlcmlvZAogICAgNiBoCgogICAgLy8gTWluaW1hbCBudW1iZXJzIG9mIHBvaW50cyBwZXIgc2VyaWVzIAogICAgMTAwCgogICAgLy8gTGFiZWxzIGZvciBlYWNoIHNwbGl0dGVkIHNlcmllcwogICAgJ3JlY29yZCcKCiAgICBUSU1FU1BMSVQKJT4KTE1BUAoKLy8gRmxhdHRlbiBsaXN0IG9mIGxpc3Qgb2YgVElNRVNQTElUCkZMQVRURU4KCidzcGxpdFNlcmllcycgU1RPUkUKCi8vCi8vIEZJTFRFUiBibG9jazoKLy8KCi8vIFN0b3JlIGEgbGFiZWxzIG1hcCBzZWxlY3Rvcgp7ICdyZWNvcmQnICd%2BWzItNV0nIH0gJ2xhYmVsc1NlbGVjdG9yJyBTVE9SRQoKLy8gRklMVEVSIEZyYW1ld29yawpbCiAgICAkc3BsaXRTZXJpZXMgICAgICAgICAgICAgICAgICAgIC8vIFNlcmllcyBsaXN0IG9yIFNpbmdsZXRvbgogICAgW10gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMYWJlbHMgdG8gY29tcHV0ZSBlcXVpdmFsZW5jZSBjbGFzcwogICAgJGxhYmVsc1NlbGVjdG9yICAgICAgICAgICAgICAgICAvLyBMYWJlbHMgbWFwIGZvciBzZWxlY3RvcgogICAgZmlsdGVyLmJ5bGFiZWxzICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgZnVuY3Rpb24gb3BlcmF0b3IgCl0KRklMVEVSCgonZmlsdGVyZWRTZXJpZXMnIFNUT1JFCgovLwovLyBCVUNLRVRJWkUgYmxvY2s6Ci8vCgovLyBCVUNLRVRJWkUgRnJhbWV3b3JrClsKICAgICRmaWx0ZXJlZFNlcmllcyAgICAgICAgICAgICAgICAgICAgIC8vIFNlcmllcyBsaXN0IG9yIFNpbmdsZXRvbgogICAgYnVja2V0aXplci5taW4gICAgICAgICAgICAgICAgICAgICAgLy8gQnVja2V0aXplIGZ1bmN0aW9uIG9wZXJhdG9yCiAgICAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMYXN0YnVja2V0IAkJCQkKICAgIDIgaCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1Y2tldHNwYW4KICAgIDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1Y2tldGNvdW50Cl0KQlVDS0VUSVpFCgovLyBBZGQgYW4gVU5CVUNLRVRJWkUgb25jZSB0aGUgc2VyaWVzIGFyZSBzYW1wbGVkICh0byBiZSBhYmxlIHRvIHVzZSBtYXBwZXIudG9ib29sZWFuIHRvIHByaW50IGFubm90YXRpb25zKQpVTkJVQ0tFVElaRQoKJ2J1Y2tldGl6ZWRTZXJpZXMnIFNUT1JFCgovLwovLyBBUFBMWSBibG9jazoKLy8KClsKICAgICRidWNrZXRpemVkU2VyaWVzICAgICAgICAgICAgICAgICAgICAvLyBTZXJpZXMgbGlzdCBvciBzaW5nbGV0b24gbWludWVuZAoKICAgIC8vCiAgICAvLyBNQVAgYmxvY2s6IENvbXB1dGUgbW92aW5nIG1lYW4gCiAgICAvLwoKICAgIFsKICAgICAgICAkYnVja2V0aXplZFNlcmllcyAgICAgICAgICAgICAgIC8vIFNlcmllcyBsaXN0IG9yIFNpbmdsZXRvbgogICAgICAgIG1hcHBlci5tZWFuICAgICAgICAgICAgICAgICAgICAgLy8gTWFwcGVyIGZ1bmN0aW9uIG9wZXJhdG9yCiAgICAgICAgNSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmUKICAgICAgICA1ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvc3QKICAgICAgICAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9jY3VyZW5jZXMKICAgIF0KICAgIE1BUCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlcmllcyBsaXN0IG9yIHNpbmdsZXRvbiBzdWJ0cmFoZW5kCgogICAgWyAnS0VQTEVSSUQnICdyZWNvcmQnIF0gICAgICAgICAgICAgLy8gTGFiZWxzIHRvIGNvbXB1dGUgZXF1aXZhbGVuY2UgY2xhc3MKICAgIG9wLnN1YiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IGZ1bmN0aW9uIG9wZXJhdG9yCl0KQVBQTFkKCidhcHBseVJlc3VsdCcgU1RPUkUKCi8vIAovLyBUaHJlc2hvbGQKLy8KClsgJGFwcGx5UmVzdWx0IFtdIC0xNS4wIG1hcHBlci5sdCAwIDAgMCBdIE1BUCAKJ2JlbG93VmFsdWVTZXJpZXMnIFNUT1JFCgovLyAKLy8gUHJpbnQgaW5pdGlhbCBzZXJpZXMgYW5kIGFubm90YXRpb25zCi8vCgpbICRiZWxvd1ZhbHVlU2VyaWVzIG1hcHBlci50b2Jvb2xlYW4gMCAwIDAgXSBNQVAKCi8vIFB1c2ggdGhlIG9yaWdpbmFsIHNlcmllcyB0byBjb21wYXJlIHdpdGgKJGJ1Y2tldGl6ZWRTZXJpZXM%3D/eyJ1cmwiOiJodHRwczovL3dhcnAucGllcnJlemVtYi5vcmcvYXBpL3YwIiwiZmV0Y2hFbmRwb2ludCI6Ii9mZXRjaCIsImhlYWRlck5hbWUiOiJYLVdhcnAxMCJ9)

# To be continued

Once you manage to compute the analysis on all the start, you should get two elements on top of the stack: the sampled list and the annotations. In the [next step](/step-5-Process-all-stars/5.3-Reformat-the-output/README.md), the output format will be a bit updated.
